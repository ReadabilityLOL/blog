<h1>{{ .Site.Params.author }}</h1>
{{ if reflect.IsSlice .Site.Params.info }}
<h2>{{ range .Site.Params.info }}{{ . | markdownify }}<br>{{ end}}</h2>
{{ else }}
<h2>{{ .Site.Params.info | markdownify }}</h2>
{{ end }}

<style>
.about{
  width:200%;
}
.contrib-chart{
  /*border: 3px solid white;*/
  transform: translate(0px, 3ch);
  scale: 2;
  contain: layout;
}

/*
.stats-label:before,
.stats-label:after {
    content: "";
    flex: 1 1;
    border-bottom: 2px solid #ffffff;
    margin: auto;
}
*/

.stats-label {
  margin: 0 auto;
  /*display: flex;
  flex-direction: row;*/
}

.stats-container {
  transform: translate(0px, 12ch);
  display: flex;
  flex-wrap: wrap;
}

.stat {
  border-radius: 2px;
  border: 3px solid #ffffff;
  flex: 50%;
}

table{
  border: 3px solid #ffffff;
  margin-bottom:1em;
}

th, td{
  width:25%;
  text-align: center;
}

</style>


<h1 class="stats-label">My stats</h1>
<hr>
<img class = "contrib-chart" src="http://ghchart.rshah.org/readabilityLOL" alt="My github contributions chart">

<center class = "stats-container">
<div id = "wca" class = "wca stat"> my wca 3x3 pr here </div>
<div id = "elo" class = "stat"> lichess stats here </div>
</center>

<script>
let elo_container = document.getElementById("elo")
let wca_container = document.getElementById("wca")

//curl --location 'https://raw.githubusercontent.com/robiningelbrecht/wca-rest-api/master/api/persons.json'
async function getData() {
  const url = 'https://lichess.org/api/user/JimKram';
  try {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Response status: ${response.status}`);
    }

    const result = await response.json();
    return result
  } catch (error) {
    console.error(error.message);
  }
}

getData().then((promisedata) => {
  perfs = promisedata["perfs"]
  console.log(promisedata)
  elo_container.innerHTML = `
<div style="border-bottom: 3px solid #ffffff; margin-bottom: 1em;">Lichess</div>
<table>
  <tr>
    <th></th>
    <th>Bullet</th>
    <th>Blitz</th>
    <th>Rapid</th>
  </tr>
  <tr>
    <th>Games</th>
    <td>${perfs["bullet"]["games"]}</td>
    <td>${perfs["blitz"]["games"]}</td>
    <td>${perfs["rapid"]["games"]}</td>
  </tr>
  <tr>
    <th>Rating</th>
    <td>${perfs["bullet"]["rating"]}</td>
    <td>${perfs["blitz"]["rating"]}</td>
    <td>${perfs["rapid"]["rating"]}</td>
  </tr>
</table>
  `
})

wca_container.innerHTML = `
<div style="border-bottom: 3px solid #ffffff; margin-bottom: 1em;">Cubing</div>
<table>
  <tr>
    <th></th>
    <th>3x3</th>
    <th>4x4</th>
    <th>Skewb</th>
  </tr>
  <tr>
    <th>Single</th>
    <td>${17.68}</td>
    <td>${"n/a"}</td>
    <td>${19.95}</td>
  </tr>
  <tr>
    <th>Ao12</th>
    <td>${23.01}</td>
    <td>${"n/a"}</td>
    <td>${24.28}</td>
  </tr>
</table>`

</script>
